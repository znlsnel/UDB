<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>라이팅 모델 - Unity Shader Programming Guide</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .content-page {
            background: white;
            min-height: 100vh;
            padding-top: 100px;
        }
        .content-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
            line-height: 1.7;
        }
        .page-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        .page-title {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 1rem;
        }
        .page-subtitle {
            font-size: 1.2rem;
            color: #666;
        }
        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: #667eea;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
        }
        .back-button:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        .content-section {
            margin: 2rem 0;
        }
        .section-title {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #667eea;
        }
        .subsection-title {
            font-size: 1.4rem;
            color: #667eea;
            margin: 2rem 0 1rem 0;
        }
        .highlight-box {
            background: linear-gradient(135deg, #667eea20, #764ba220);
            border-left: 4px solid #667eea;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
        }
        .lighting-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        .lighting-card {
            background: #f8fafc;
            padding: 1.5rem;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }
        .lighting-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .lighting-card h4 {
            color: #667eea;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }
        .lighting-card .difficulty {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #667eea;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        .lighting-card.basic .difficulty {
            background: #10b981;
        }
        .lighting-card.intermediate .difficulty {
            background: #f59e0b;
        }
        .lighting-card.advanced .difficulty {
            background: #ef4444;
        }
        .code-example {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', 'SF Mono', Monaco, 'Inconsolata', 'Roboto Mono', 'Source Code Pro', monospace;
            overflow-x: auto;
            white-space: pre-wrap;
            line-height: 1.6;
            border: 1px solid #333;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .code-example .keyword {
            color: #569cd6;
            font-weight: 500;
        }
        .code-example .string {
            color: #ce9178;
        }
        .code-example .comment {
            color: #6a9955;
            font-style: italic;
        }
        .code-example .type {
            color: #4ec9b0;
        }
        .code-example .number {
            color: #b5cea8;
        }
        .code-example .property {
            color: #9cdcfe;
        }
        .code-example .bracket {
            color: #ffd700;
        }
        .code-example .function {
            color: #dcdcaa;
        }
        .formula-box {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            text-align: center;
            border: 1px solid #cbd5e0;
            font-family: 'Times New Roman', serif;
            font-size: 1.1rem;
        }
        .tip-box {
            background: linear-gradient(135deg, #10b98120, #059f4620);
            border-left: 4px solid #10b981;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
        }
        .warning-box {
            background: linear-gradient(135deg, #fbbf2420, #f5935420);
            border-left: 4px solid #f59354;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }
        .comparison-table td {
            padding: 1rem;
            border-bottom: 1px solid #e2e8f0;
            vertical-align: top;
        }
        .comparison-table tr:hover {
            background: #f8fafc;
        }
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            gap: 1rem;
        }
        .nav-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            flex: 1;
            justify-content: center;
        }
        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        .nav-button.prev {
            background: linear-gradient(135deg, #6b7280, #9ca3af);
        }
        .nav-button.prev:hover {
            box-shadow: 0 8px 25px rgba(107, 114, 128, 0.3);
        }
        .visual-demo {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            padding: 2rem;
            border-radius: 12px;
            margin: 2rem 0;
            text-align: center;
            border: 1px solid #cbd5e0;
        }
        .demo-spheres {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 1rem 0;
        }
        .demo-sphere {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            position: relative;
            margin: 0.5rem;
        }
        .demo-sphere.lambert {
            background: radial-gradient(circle at 30% 30%, #ffffff, #888888, #333333);
        }
        .demo-sphere.phong {
            background: radial-gradient(circle at 30% 30%, #ffffff, #667eea, #333333);
        }
        .demo-sphere.blinn {
            background: radial-gradient(circle at 30% 30%, #ffffff 10%, #667eea 50%, #333333);
        }
        .demo-sphere.pbr {
            background: radial-gradient(circle at 30% 30%, #ffffff 5%, #f59e0b 30%, #667eea 70%, #333333);
        }
        .demo-label {
            font-size: 0.9rem;
            font-weight: 500;
            margin-top: 0.5rem;
            color: #333;
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <i class="fas fa-cube"></i>
                    <span>Unity Shader Programming</span>
                </div>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="../index.html" class="nav-link">홈</a>
                    </li>
                    <li class="nav-item">
                        <a href="../index.html#about" class="nav-link">소개</a>
                    </li>
                    <li class="nav-item">
                        <a href="../index.html#contact" class="nav-link">문의</a>
                    </li>
                </ul>
                <div class="hamburger">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>
    </header>

    <main class="content-page">
        <div class="content-container">
            <a href="../index.html#table-of-contents" class="back-button">
                <i class="fas fa-arrow-left"></i>
                목차로 돌아가기
            </a>
            
            <div class="page-header">
                <h1 class="page-title">라이팅 모델</h1>
                <p class="page-subtitle">Lambert, Phong, PBR 라이팅 구현</p>
            </div>

            <div class="content-section">
                <h2 class="section-title">💡 라이팅 모델이란?</h2>
                
                <p><strong>라이팅 모델</strong>은 3D 객체가 광원으로부터 받는 빛을 어떻게 반사하고 산란시키는지를 수학적으로 모델링한 것입니다. 현실적인 조명 효과를 구현하기 위해 다양한 라이팅 모델이 개발되었습니다.</p>

                <div class="highlight-box">
                    <strong>🔍 라이팅의 구성 요소:</strong>
                    <ul style="margin-top: 1rem;">
                        <li><strong>Ambient Light (환경광):</strong> 모든 방향에서 균등하게 오는 기본 조명</li>
                        <li><strong>Diffuse Light (확산광):</strong> 표면에서 모든 방향으로 균등하게 반사되는 빛</li>
                        <li><strong>Specular Light (반사광):</strong> 특정 방향으로 강하게 반사되는 빛 (하이라이트)</li>
                    </ul>
                </div>

                <div class="visual-demo">
                    <h3 style="margin-bottom: 1.5rem; color: #333;">라이팅 모델 비교</h3>
                    <div class="demo-spheres">
                        <div>
                            <div class="demo-sphere lambert"></div>
                            <div class="demo-label">Lambert</div>
                        </div>
                        <div>
                            <div class="demo-sphere phong"></div>
                            <div class="demo-label">Phong</div>
                        </div>
                        <div>
                            <div class="demo-sphere blinn"></div>
                            <div class="demo-label">Blinn-Phong</div>
                        </div>
                        <div>
                            <div class="demo-sphere pbr"></div>
                            <div class="demo-label">PBR</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="content-section">
                <h2 class="section-title">🌟 주요 라이팅 모델</h2>
                
                <div class="lighting-grid">
                    <div class="lighting-card basic">
                        <div class="difficulty">기초</div>
                        <h4><i class="fas fa-sun"></i> Lambert 라이팅</h4>
                        <p>가장 기본적인 확산 반사 모델입니다. 표면의 밝기가 광원과 법선 벡터의 각도에만 의존합니다.</p>
                        <p><strong>특징:</strong> 간단하고 빠름, 매트한 표면에 적합</p>
                    </div>
                    
                    <div class="lighting-card intermediate">
                        <div class="difficulty">중급</div>
                        <h4><i class="fas fa-gem"></i> Phong 라이팅</h4>
                        <p>Lambert에 반사광(Specular)을 추가한 모델입니다. 광택이 있는 표면의 하이라이트를 표현할 수 있습니다.</p>
                        <p><strong>특징:</strong> 반사 하이라이트, 금속성 표면 표현</p>
                    </div>
                    
                    <div class="lighting-card intermediate">
                        <div class="difficulty">중급</div>
                        <h4><i class="fas fa-star"></i> Blinn-Phong</h4>
                        <p>Phong 모델을 개선한 버전으로, 계산이 더 효율적이고 더 자연스러운 하이라이트를 만듭니다.</p>
                        <p><strong>특징:</strong> Phong보다 효율적, Unity 기본 모델</p>
                    </div>
                    
                    <div class="lighting-card advanced">
                        <div class="difficulty">고급</div>
                        <h4><i class="fas fa-magic"></i> PBR (물리 기반)</h4>
                        <p>물리적으로 정확한 라이팅 모델로, 현실적인 재질 표현이 가능합니다. 현대 게임 엔진의 표준입니다.</p>
                        <p><strong>특징:</strong> 사실적 렌더링, 복잡한 계산</p>
                    </div>
                </div>
            </div>

            <div class="content-section">
                <h2 class="section-title">🔆 Lambert 라이팅 모델</h2>
                
                <p>Lambert 라이팅은 <strong>완전 확산 반사</strong>를 가정한 가장 간단한 라이팅 모델입니다. 표면의 밝기는 광원 방향과 표면 법선 벡터의 내적으로 결정됩니다.</p>

                <div class="formula-box">
                    <strong>Lambert 공식:</strong><br>
                    <em>Diffuse = max(0, dot(N, L)) × LightColor × MaterialColor</em><br>
                    <small>N: 법선 벡터, L: 광원 방향 벡터</small>
                </div>

                <h3 class="subsection-title">Lambert 셰이더 구현</h3>
                
                <div class="code-example">
<span class="keyword">Shader</span> <span class="string">"Custom/LambertLighting"</span>
<span class="bracket">{</span>
    <span class="keyword">Properties</span>
    <span class="bracket">{</span>
        <span class="property">_MainTex</span> (<span class="string">"Texture"</span>, <span class="keyword">2D</span>) = <span class="string">"white"</span> <span class="bracket">{}</span>
        <span class="property">_Color</span> (<span class="string">"Color"</span>, <span class="keyword">Color</span>) = (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)
    <span class="bracket">}</span>
    
    <span class="keyword">SubShader</span>
    <span class="bracket">{</span>
        <span class="keyword">Tags</span> <span class="bracket">{</span> <span class="string">"RenderType"</span>=<span class="string">"Opaque"</span> <span class="bracket">}</span>
        
        <span class="keyword">Pass</span>
        <span class="bracket">{</span>
            <span class="keyword">Tags</span> <span class="bracket">{</span> <span class="string">"LightMode"</span>=<span class="string">"ForwardBase"</span> <span class="bracket">}</span>
            
            <span class="keyword">CGPROGRAM</span>
            <span class="keyword">#pragma vertex</span> vert
            <span class="keyword">#pragma fragment</span> frag
            <span class="keyword">#include</span> <span class="string">"UnityCG.cginc"</span>
            <span class="keyword">#include</span> <span class="string">"Lighting.cginc"</span>
            
            <span class="keyword">struct</span> <span class="type">appdata</span>
            <span class="bracket">{</span>
                <span class="type">float4</span> <span class="property">vertex</span> : <span class="keyword">POSITION</span>;
                <span class="type">float3</span> <span class="property">normal</span> : <span class="keyword">NORMAL</span>;
                <span class="type">float2</span> <span class="property">uv</span> : <span class="keyword">TEXCOORD0</span>;
            <span class="bracket">}</span>;
            
            <span class="keyword">struct</span> <span class="type">v2f</span>
            <span class="bracket">{</span>
                <span class="type">float4</span> <span class="property">pos</span> : <span class="keyword">SV_POSITION</span>;
                <span class="type">float2</span> <span class="property">uv</span> : <span class="keyword">TEXCOORD0</span>;
                <span class="type">float3</span> <span class="property">worldNormal</span> : <span class="keyword">TEXCOORD1</span>;
            <span class="bracket">}</span>;
            
            <span class="keyword">sampler2D</span> <span class="property">_MainTex</span>;
            <span class="type">float4</span> <span class="property">_MainTex_ST</span>;
            <span class="type">fixed4</span> <span class="property">_Color</span>;
            
            <span class="type">v2f</span> <span class="function">vert</span>(<span class="type">appdata</span> v)
            <span class="bracket">{</span>
                <span class="type">v2f</span> o;
                o.<span class="property">pos</span> = <span class="function">UnityObjectToClipPos</span>(v.<span class="property">vertex</span>);
                o.<span class="property">uv</span> = <span class="function">TRANSFORM_TEX</span>(v.<span class="property">uv</span>, <span class="property">_MainTex</span>);
                o.<span class="property">worldNormal</span> = <span class="function">UnityObjectToWorldNormal</span>(v.<span class="property">normal</span>);
                <span class="keyword">return</span> o;
            <span class="bracket">}</span>
            
            <span class="type">fixed4</span> <span class="function">frag</span>(<span class="type">v2f</span> i) : <span class="keyword">SV_Target</span>
            <span class="bracket">{</span>
                <span class="comment">// 텍스처 샘플링</span>
                <span class="type">fixed4</span> texColor = <span class="function">tex2D</span>(<span class="property">_MainTex</span>, i.<span class="property">uv</span>);
                
                <span class="comment">// 법선 벡터 정규화</span>
                <span class="type">float3</span> normal = <span class="function">normalize</span>(i.<span class="property">worldNormal</span>);
                
                <span class="comment">// 광원 방향 벡터</span>
                <span class="type">float3</span> lightDir = <span class="function">normalize</span>(<span class="property">_WorldSpaceLightPos0</span>.<span class="property">xyz</span>);
                
                <span class="comment">// Lambert 확산 반사 계산</span>
                <span class="type">float</span> NdotL = <span class="function">max</span>(<span class="number">0.0</span>, <span class="function">dot</span>(normal, lightDir));
                
                <span class="comment">// 최종 색상 계산</span>
                <span class="type">fixed4</span> diffuse = NdotL * <span class="property">_LightColor0</span> * <span class="property">_Color</span> * texColor;
                
                <span class="comment">// 환경광 추가</span>
                <span class="type">fixed4</span> ambient = <span class="property">UNITY_LIGHTMODEL_AMBIENT</span> * <span class="property">_Color</span> * texColor;
                
                <span class="keyword">return</span> diffuse + ambient;
            <span class="bracket">}</span>
            
            <span class="keyword">ENDCG</span>
        <span class="bracket">}</span>
    <span class="bracket">}</span>
<span class="bracket">}</span>
                </div>

                <div class="tip-box">
                    <strong>💡 Lambert 라이팅의 특징:</strong>
                    <ul style="margin-top: 1rem;">
                        <li><strong>간단함:</strong> 계산이 매우 빠르고 이해하기 쉬움</li>
                        <li><strong>매트한 표면:</strong> 종이, 천, 석고 등의 재질에 적합</li>
                        <li><strong>기본 조명:</strong> 대부분의 라이팅 모델의 기초가 됨</li>
                    </ul>
                </div>
            </div>

            <div class="content-section">
                <h2 class="section-title">✨ Phong 라이팅 모델</h2>
                
                <p>Phong 라이팅은 Lambert 확산 반사에 <strong>반사광(Specular)</strong>을 추가한 모델입니다. 광택이 있는 표면의 하이라이트를 표현할 수 있어 더 현실적인 렌더링이 가능합니다.</p>

                <div class="formula-box">
                    <strong>Phong 공식:</strong><br>
                    <em>Specular = pow(max(0, dot(R, V)), shininess)</em><br>
                    <small>R: 반사 벡터, V: 시선 벡터, shininess: 광택도</small>
                </div>

                <h3 class="subsection-title">Phong 셰이더 구현</h3>
                
                <div class="code-example">
<span class="keyword">Shader</span> <span class="string">"Custom/PhongLighting"</span>
<span class="bracket">{</span>
    <span class="keyword">Properties</span>
    <span class="bracket">{</span>
        <span class="property">_MainTex</span> (<span class="string">"Texture"</span>, <span class="keyword">2D</span>) = <span class="string">"white"</span> <span class="bracket">{}</span>
        <span class="property">_Color</span> (<span class="string">"Color"</span>, <span class="keyword">Color</span>) = (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)
        <span class="property">_SpecColor</span> (<span class="string">"Specular Color"</span>, <span class="keyword">Color</span>) = (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)
        <span class="property">_Shininess</span> (<span class="string">"Shininess"</span>, <span class="keyword">Range</span>(<span class="number">1</span>, <span class="number">100</span>)) = <span class="number">10</span>
    <span class="bracket">}</span>
    
    <span class="keyword">SubShader</span>
    <span class="bracket">{</span>
        <span class="keyword">Tags</span> <span class="bracket">{</span> <span class="string">"RenderType"</span>=<span class="string">"Opaque"</span> <span class="bracket">}</span>
        
        <span class="keyword">Pass</span>
        <span class="bracket">{</span>
            <span class="keyword">Tags</span> <span class="bracket">{</span> <span class="string">"LightMode"</span>=<span class="string">"ForwardBase"</span> <span class="bracket">}</span>
            
            <span class="keyword">CGPROGRAM</span>
            <span class="keyword">#pragma vertex</span> vert
            <span class="keyword">#pragma fragment</span> frag
            <span class="keyword">#include</span> <span class="string">"UnityCG.cginc"</span>
            <span class="keyword">#include</span> <span class="string">"Lighting.cginc"</span>
            
            <span class="keyword">struct</span> <span class="type">appdata</span>
            <span class="bracket">{</span>
                <span class="type">float4</span> <span class="property">vertex</span> : <span class="keyword">POSITION</span>;
                <span class="type">float3</span> <span class="property">normal</span> : <span class="keyword">NORMAL</span>;
                <span class="type">float2</span> <span class="property">uv</span> : <span class="keyword">TEXCOORD0</span>;
            <span class="bracket">}</span>;
            
            <span class="keyword">struct</span> <span class="type">v2f</span>
            <span class="bracket">{</span>
                <span class="type">float4</span> <span class="property">pos</span> : <span class="keyword">SV_POSITION</span>;
                <span class="type">float2</span> <span class="property">uv</span> : <span class="keyword">TEXCOORD0</span>;
                <span class="type">float3</span> <span class="property">worldNormal</span> : <span class="keyword">TEXCOORD1</span>;
                <span class="type">float3</span> <span class="property">worldPos</span> : <span class="keyword">TEXCOORD2</span>;
            <span class="bracket">}</span>;
            
            <span class="keyword">sampler2D</span> <span class="property">_MainTex</span>;
            <span class="type">float4</span> <span class="property">_MainTex_ST</span>;
            <span class="type">fixed4</span> <span class="property">_Color</span>;
            <span class="type">fixed4</span> <span class="property">_SpecColor</span>;
            <span class="type">float</span> <span class="property">_Shininess</span>;
            
            <span class="type">v2f</span> <span class="function">vert</span>(<span class="type">appdata</span> v)
            <span class="bracket">{</span>
                <span class="type">v2f</span> o;
                o.<span class="property">pos</span> = <span class="function">UnityObjectToClipPos</span>(v.<span class="property">vertex</span>);
                o.<span class="property">uv</span> = <span class="function">TRANSFORM_TEX</span>(v.<span class="property">uv</span>, <span class="property">_MainTex</span>);
                o.<span class="property">worldNormal</span> = <span class="function">UnityObjectToWorldNormal</span>(v.<span class="property">normal</span>);
                o.<span class="property">worldPos</span> = <span class="function">mul</span>(<span class="property">unity_ObjectToWorld</span>, v.<span class="property">vertex</span>).<span class="property">xyz</span>;
                <span class="keyword">return</span> o;
            <span class="bracket">}</span>
            
            <span class="type">fixed4</span> <span class="function">frag</span>(<span class="type">v2f</span> i) : <span class="keyword">SV_Target</span>
            <span class="bracket">{</span>
                <span class="comment">// 텍스처 샘플링</span>
                <span class="type">fixed4</span> texColor = <span class="function">tex2D</span>(<span class="property">_MainTex</span>, i.<span class="property">uv</span>);
                
                <span class="comment">// 벡터 계산</span>
                <span class="type">float3</span> normal = <span class="function">normalize</span>(i.<span class="property">worldNormal</span>);
                <span class="type">float3</span> lightDir = <span class="function">normalize</span>(<span class="property">_WorldSpaceLightPos0</span>.<span class="property">xyz</span>);
                <span class="type">float3</span> viewDir = <span class="function">normalize</span>(<span class="property">_WorldSpaceCameraPos</span> - i.<span class="property">worldPos</span>);
                <span class="type">float3</span> reflectDir = <span class="function">reflect</span>(-lightDir, normal);
                
                <span class="comment">// Lambert 확산 반사</span>
                <span class="type">float</span> NdotL = <span class="function">max</span>(<span class="number">0.0</span>, <span class="function">dot</span>(normal, lightDir));
                <span class="type">fixed4</span> diffuse = NdotL * <span class="property">_LightColor0</span> * <span class="property">_Color</span> * texColor;
                
                <span class="comment">// Phong 반사광</span>
                <span class="type">float</span> RdotV = <span class="function">max</span>(<span class="number">0.0</span>, <span class="function">dot</span>(reflectDir, viewDir));
                <span class="type">fixed4</span> specular = <span class="function">pow</span>(RdotV, <span class="property">_Shininess</span>) * <span class="property">_SpecColor</span> * <span class="property">_LightColor0</span>;
                
                <span class="comment">// 환경광</span>
                <span class="type">fixed4</span> ambient = <span class="property">UNITY_LIGHTMODEL_AMBIENT</span> * <span class="property">_Color</span> * texColor;
                
                <span class="keyword">return</span> ambient + diffuse + specular;
            <span class="bracket">}</span>
            
            <span class="keyword">ENDCG</span>
        <span class="bracket">}</span>
    <span class="bracket">}</span>
<span class="bracket">}</span>
                </div>
            </div>

            <div class="content-section">
                <h2 class="section-title">🌟 Blinn-Phong 라이팅 모델</h2>
                
                <p>Blinn-Phong은 Phong 모델을 개선한 버전으로, <strong>하프 벡터(Half Vector)</strong>를 사용하여 계산을 단순화하고 더 자연스러운 하이라이트를 만듭니다.</p>

                <div class="formula-box">
                    <strong>Blinn-Phong 공식:</strong><br>
                    <em>Specular = pow(max(0, dot(N, H)), shininess)</em><br>
                    <small>H = normalize(L + V) (하프 벡터)</small>
                </div>

                <h3 class="subsection-title">Blinn-Phong 핵심 코드</h3>
                
                <div class="code-example">
<span class="comment">// Blinn-Phong 반사광 계산</span>
<span class="type">float3</span> lightDir = <span class="function">normalize</span>(<span class="property">_WorldSpaceLightPos0</span>.<span class="property">xyz</span>);
<span class="type">float3</span> viewDir = <span class="function">normalize</span>(<span class="property">_WorldSpaceCameraPos</span> - i.<span class="property">worldPos</span>);

<span class="comment">// 하프 벡터 계산</span>
<span class="type">float3</span> halfVector = <span class="function">normalize</span>(lightDir + viewDir);

<span class="comment">// Blinn-Phong 반사광</span>
<span class="type">float</span> NdotH = <span class="function">max</span>(<span class="number">0.0</span>, <span class="function">dot</span>(normal, halfVector));
<span class="type">fixed4</span> specular = <span class="function">pow</span>(NdotH, <span class="property">_Shininess</span>) * <span class="property">_SpecColor</span> * <span class="property">_LightColor0</span>;
                </div>

                <div class="tip-box">
                    <strong>💡 Blinn-Phong의 장점:</strong>
                    <ul style="margin-top: 1rem;">
                        <li><strong>효율성:</strong> reflect() 함수 계산이 불필요</li>
                        <li><strong>자연스러움:</strong> 더 부드러운 하이라이트</li>
                        <li><strong>안정성:</strong> 극단적인 각도에서도 안정적</li>
                    </ul>
                </div>
            </div>

            <div class="content-section">
                <h2 class="section-title">⚖️ 라이팅 모델 비교</h2>
                
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>특성</th>
                            <th>Lambert</th>
                            <th>Phong</th>
                            <th>Blinn-Phong</th>
                            <th>PBR</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>계산 복잡도</strong></td>
                            <td>매우 낮음</td>
                            <td>중간</td>
                            <td>중간</td>
                            <td>높음</td>
                        </tr>
                        <tr>
                            <td><strong>반사광</strong></td>
                            <td>없음</td>
                            <td>있음</td>
                            <td>있음 (개선)</td>
                            <td>물리적 정확</td>
                        </tr>
                        <tr>
                            <td><strong>적합한 재질</strong></td>
                            <td>매트한 표면</td>
                            <td>광택 표면</td>
                            <td>다양한 표면</td>
                            <td>모든 재질</td>
                        </tr>
                        <tr>
                            <td><strong>현실성</strong></td>
                            <td>낮음</td>
                            <td>중간</td>
                            <td>중간</td>
                            <td>매우 높음</td>
                        </tr>
                        <tr>
                            <td><strong>사용 빈도</strong></td>
                            <td>기초 학습</td>
                            <td>레거시</td>
                            <td>일반적</td>
                            <td>현대 표준</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="content-section">
                <h2 class="section-title">🛠️ 실습: 라이팅 모델 비교 셰이더</h2>
                
                <p>여러 라이팅 모델을 한 번에 비교할 수 있는 셰이더를 만들어보겠습니다.</p>

                <div class="code-example">
<span class="keyword">Shader</span> <span class="string">"Custom/LightingComparison"</span>
<span class="bracket">{</span>
    <span class="keyword">Properties</span>
    <span class="bracket">{</span>
        <span class="property">_Color</span> (<span class="string">"Color"</span>, <span class="keyword">Color</span>) = (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)
        <span class="property">_SpecColor</span> (<span class="string">"Specular Color"</span>, <span class="keyword">Color</span>) = (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)
        <span class="property">_Shininess</span> (<span class="string">"Shininess"</span>, <span class="keyword">Range</span>(<span class="number">1</span>, <span class="number">100</span>)) = <span class="number">20</span>
        <span class="property">_LightingModel</span> (<span class="string">"Lighting Model"</span>, <span class="keyword">Range</span>(<span class="number">0</span>, <span class="number">2</span>)) = <span class="number">0</span>
        <span class="comment">// 0: Lambert, 1: Phong, 2: Blinn-Phong</span>
    <span class="bracket">}</span>
    
    <span class="keyword">SubShader</span>
    <span class="bracket">{</span>
        <span class="keyword">Tags</span> <span class="bracket">{</span> <span class="string">"RenderType"</span>=<span class="string">"Opaque"</span> <span class="bracket">}</span>
        
        <span class="keyword">Pass</span>
        <span class="bracket">{</span>
            <span class="keyword">Tags</span> <span class="bracket">{</span> <span class="string">"LightMode"</span>=<span class="string">"ForwardBase"</span> <span class="bracket">}</span>
            
            <span class="keyword">CGPROGRAM</span>
            <span class="keyword">#pragma vertex</span> vert
            <span class="keyword">#pragma fragment</span> frag
            <span class="keyword">#include</span> <span class="string">"UnityCG.cginc"</span>
            <span class="keyword">#include</span> <span class="string">"Lighting.cginc"</span>
            
            <span class="type">fixed4</span> <span class="property">_Color</span>;
            <span class="type">fixed4</span> <span class="property">_SpecColor</span>;
            <span class="type">float</span> <span class="property">_Shininess</span>;
            <span class="type">int</span> <span class="property">_LightingModel</span>;
            
            <span class="keyword">struct</span> <span class="type">appdata</span>
            <span class="bracket">{</span>
                <span class="type">float4</span> <span class="property">vertex</span> : <span class="keyword">POSITION</span>;
                <span class="type">float3</span> <span class="property">normal</span> : <span class="keyword">NORMAL</span>;
            <span class="bracket">}</span>;
            
            <span class="keyword">struct</span> <span class="type">v2f</span>
            <span class="bracket">{</span>
                <span class="type">float4</span> <span class="property">pos</span> : <span class="keyword">SV_POSITION</span>;
                <span class="type">float3</span> <span class="property">worldNormal</span> : <span class="keyword">TEXCOORD0</span>;
                <span class="type">float3</span> <span class="property">worldPos</span> : <span class="keyword">TEXCOORD1</span>;
            <span class="bracket">}</span>;
            
            <span class="type">v2f</span> <span class="function">vert</span>(<span class="type">appdata</span> v)
            <span class="bracket">{</span>
                <span class="type">v2f</span> o;
                o.<span class="property">pos</span> = <span class="function">UnityObjectToClipPos</span>(v.<span class="property">vertex</span>);
                o.<span class="property">worldNormal</span> = <span class="function">UnityObjectToWorldNormal</span>(v.<span class="property">normal</span>);
                o.<span class="property">worldPos</span> = <span class="function">mul</span>(<span class="property">unity_ObjectToWorld</span>, v.<span class="property">vertex</span>).<span class="property">xyz</span>;
                <span class="keyword">return</span> o;
            <span class="bracket">}</span>
            
            <span class="type">fixed4</span> <span class="function">frag</span>(<span class="type">v2f</span> i) : <span class="keyword">SV_Target</span>
            <span class="bracket">{</span>
                <span class="type">float3</span> normal = <span class="function">normalize</span>(i.<span class="property">worldNormal</span>);
                <span class="type">float3</span> lightDir = <span class="function">normalize</span>(<span class="property">_WorldSpaceLightPos0</span>.<span class="property">xyz</span>);
                <span class="type">float3</span> viewDir = <span class="function">normalize</span>(<span class="property">_WorldSpaceCameraPos</span> - i.<span class="property">worldPos</span>);
                
                <span class="comment">// Lambert 확산 반사</span>
                <span class="type">float</span> NdotL = <span class="function">max</span>(<span class="number">0.0</span>, <span class="function">dot</span>(normal, lightDir));
                <span class="type">fixed4</span> diffuse = NdotL * <span class="property">_LightColor0</span> * <span class="property">_Color</span>;
                
                <span class="comment">// 반사광 계산</span>
                <span class="type">fixed4</span> specular = <span class="type">fixed4</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);
                
                <span class="keyword">if</span> (<span class="property">_LightingModel</span> == <span class="number">1</span>) <span class="comment">// Phong</span>
                <span class="bracket">{</span>
                    <span class="type">float3</span> reflectDir = <span class="function">reflect</span>(-lightDir, normal);
                    <span class="type">float</span> RdotV = <span class="function">max</span>(<span class="number">0.0</span>, <span class="function">dot</span>(reflectDir, viewDir));
                    specular = <span class="function">pow</span>(RdotV, <span class="property">_Shininess</span>) * <span class="property">_SpecColor</span> * <span class="property">_LightColor0</span>;
                <span class="bracket">}</span>
                <span class="keyword">else if</span> (<span class="property">_LightingModel</span> == <span class="number">2</span>) <span class="comment">// Blinn-Phong</span>
                <span class="bracket">{</span>
                    <span class="type">float3</span> halfVector = <span class="function">normalize</span>(lightDir + viewDir);
                    <span class="type">float</span> NdotH = <span class="function">max</span>(<span class="number">0.0</span>, <span class="function">dot</span>(normal, halfVector));
                    specular = <span class="function">pow</span>(NdotH, <span class="property">_Shininess</span>) * <span class="property">_SpecColor</span> * <span class="property">_LightColor0</span>;
                <span class="bracket">}</span>
                
                <span class="type">fixed4</span> ambient = <span class="property">UNITY_LIGHTMODEL_AMBIENT</span> * <span class="property">_Color</span>;
                
                <span class="keyword">return</span> ambient + diffuse + specular;
            <span class="bracket">}</span>
            
            <span class="keyword">ENDCG</span>
        <span class="bracket">}</span>
    <span class="bracket">}</span>
<span class="bracket">}</span>
                </div>

                <div class="warning-box">
                    <strong>⚠️ 성능 고려사항:</strong>
                    <ul style="margin-top: 1rem;">
                        <li><strong>모바일:</strong> Lambert나 Blinn-Phong 권장</li>
                        <li><strong>PC/콘솔:</strong> PBR 사용 가능</li>
                        <li><strong>VR:</strong> 간단한 라이팅 모델 선호</li>
                    </ul>
                </div>
            </div>

            <div class="navigation-buttons">
                <a href="vertex-fragment.html" class="nav-button prev">
                    <i class="fas fa-chevron-left"></i>
                    이전: 버텍스 & 프래그먼트 셰이더
                </a>
                <a href="textures-sampling.html" class="nav-button">
                    다음: 텍스처와 샘플링
                    <i class="fas fa-chevron-right"></i>
                </a>
            </div>
        </div>
    </main>

    <script src="../script.js"></script>
</body>
</html> 